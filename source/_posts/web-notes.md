---
title: 因特网五层协议笔记
date: 2018-12-22 12:32:21
categories:
- 上课
- 前端
tags:
- 计算机网络
- 作业
- 前端
---

就是笔记了

<!-- more -->

<!-- TODO: 补充因特网总结 -->

## 应用层

* 数据单位：报文(message)

### 要点

* 应用程序体系结构：CS结构/P2P结构
* 进程通信：socket
* 服务分类：可靠数据传输，吞吐量，定时，安全性
  * 持续链接和非持续连接
  * 使用的运输层协议：TCP vs UDP
  * SSL

### 协议和应用

#### web 和 HTTP

* 带流水线的持续连接
  * 关键词：TCP，RTT，80端口，CS结构
* 报文格式
  * 关键词：请求行，首部行，实体体
  * 常用状态码：200 301 304 400 404 500 
* 无状态协议
  * cookie
* web缓存
  * 代理服务器（web缓存器）
  * 条件GET方法："If-Modified-Since""Last-Modified"首部行

#### DNS：因特网的目录服务

* 解决的问题：主机名到IP地址的转换
  * 关键字：UDP，53端口，CS结构
* 分布式设计
  * 层次：根/顶级域(TLD)/权威/本地DNS服务器
  * 递归查询 vs 迭代查询
  * DNS缓存

#### P2P

* 文件分发
  * 分发时间计算，下界
* 分布式散列表（P2P数据库）（DHT）
  * 关键字：散列函数，
  * 实现：环形DHT，具有捷径的环形DHT，


#### socket编程

## 传输层

* 数据单位：报文段(segment)
* 为运行在不同主机的应用进程之间提供了逻辑通信
* 在端系统中实现而非在路由器
* 报文段格式：源端口号字段、目的端口号字段

### 协议

#### TCP

* 关键词：可靠数据传输协议，拥塞控制，面向连接
* 多路复用和多路分解
  * 多路分解：将运输层报文段中的数据交付到正确的socket
  * 多路复用：将不同socket的数据块封装好生成报文段，传播到网络层
* socket标识：四元组（源IP+源端口号+目的IP+目的端口号）
* socket分配：每个连接都建立一个新socket
* 报文段结构

##### 可靠数据传输原理

* 有限状态机(Finite-State Machine, FSM)
* 自动重传请求(ARQ)协议：差错检测+接收方反馈+重传
* 额外的问题与解决
  * ACK/NAK本身受损：添加分组序号
  * 丢包：倒计数计时器
  * 链路利用率低：流水线技术
  * 流水线技术差错恢复：回退N步(GO-Back-N, GBN)、选择重传(Selective Repeat, SR)
* 拥塞控制

##### TCP实现

* 连接管理
  * 建立连接：三次握手
  * 关闭连接
* TCP拥塞算法：加性增、乘性减(Additive-Increase Multiplicative-Decrease, AIMD)
  * 参数：cwnd/ssthresh
  * 慢启动：cwnd×2 ~ ssthreash=cwnd_t/2, cwnd=1,cwnd×2
  * 拥塞避免：cwnd++ ~ ssthresh=cwnd_t/2, cwnd=1
  * 快速恢复（非必须）

#### UDP

* 关键词：不可靠，无连接
* socket标识：二元组（目的IP地址+目的端口号）
* socket分配：到达同IP和端口的报文段共用同一个socket
* 传输准备：无需准备即可进行数据传输
* 检验和：差错检测功能

## 网络层

### 协议

#### IP协议

* 关键词：尽力而为交付服务，不可靠服务